<Project>

  <!--
    Example Directory.Build.props showing how to use SwitchableReferences.

    This file goes at your repository root. Adjust the import path to
    wherever you placed SwitchableReferences.props.
  -->

  <!-- Import shared infrastructure (parses .slnx project list) -->
  <Import Project="$(MSBuildThisFileDirectory)build\SwitchableReferences.props" />

  <!--
    Declare each switchable dependency below.

    Convention: UsePackageReference_{PackageName_with_underscores}

    The same property name is used in .csproj conditions, NCrunch
    CustomBuildProperties, and env var / CLI overrides.

    If already set (NCrunch / env var / CLI /p:), the existing value wins.
    Otherwise, auto-detect from .slnx: use PackageReference if the project
    is NOT in the current solution.
    If neither fires, the property stays empty â†’ ProjectReference (safe default).
  -->
  <PropertyGroup>

    <!-- Acme.Utilities -->
    <UsePackageReference_Acme_Utilities
        Condition="'$(UsePackageReference_Acme_Utilities)' != 'true'
                 And '$(_SwitchRef_SolutionProjects)' != ''
                 And !$(_SwitchRef_SolutionProjects.Contains('|Acme.Utilities.csproj|'))">true</UsePackageReference_Acme_Utilities>

    <!-- Acme.Core -->
    <UsePackageReference_Acme_Core
        Condition="'$(UsePackageReference_Acme_Core)' != 'true'
                 And '$(_SwitchRef_SolutionProjects)' != ''
                 And !$(_SwitchRef_SolutionProjects.Contains('|Acme.Core.csproj|'))">true</UsePackageReference_Acme_Core>

    <!-- Acme.Data -->
    <UsePackageReference_Acme_Data
        Condition="'$(UsePackageReference_Acme_Data)' != 'true'
                 And '$(_SwitchRef_SolutionProjects)' != ''
                 And !$(_SwitchRef_SolutionProjects.Contains('|Acme.Data.csproj|'))">true</UsePackageReference_Acme_Data>

  </PropertyGroup>

</Project>
